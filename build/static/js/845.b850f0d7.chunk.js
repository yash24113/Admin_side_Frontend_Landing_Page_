"use strict";(self.webpackChunkadmin_panel_frontend=self.webpackChunkadmin_panel_frontend||[]).push([[845],{845:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var o=a(9379),n=a(5043),r=a(7392),l=a(6446),s=a(5865),i=a(8911),c=a(3438),d=a(5795),u=a(35),p=a(6600),A=a(5316),m=a(7254),h=a(3193),v=a(9190),g=a(2221),f=a(2143),x=a(9347),y=a(8768),C=a(1019),j=a(3560),S=a(3768),w=a(7968),b=a(9722),M=a(2378),k=a(579);const z="https://langingpage-production-f27f.up.railway.app";const L=function(){const[e,t]=(0,n.useState)([]),[L,I]=(0,n.useState)([]),[N,P]=(0,n.useState)(!1),[_,O]=(0,n.useState)(null),[R,W]=(0,n.useState)({name:"",code:"",country:""}),[E,B]=(0,n.useState)(""),[F,H]=(0,n.useState)(""),[T,V]=(0,n.useState)(3),Z=async()=>{const e=await b.A.get("".concat(z,"/api/states"));t(e.data)};(0,n.useEffect)(()=>{Z(),(async()=>{const e=await b.A.get("".concat(z,"/api/countries"));I(e.data)})()},[]);const $=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;O(t),W(t?{name:t.name,code:t.code,country:(null===(e=t.country)||void 0===e?void 0:e._id)||t.country||""}:{name:"",code:"",country:""}),B(""),P(!0)},q=()=>{P(!1),O(null),W({name:"",code:"",country:""}),B("")},D=e=>e&&e.country?"object"===typeof e.country&&e.country.name?e.country:L.find(t=>t._id===e.country)||{}:{},U=[{field:"name",headerName:"State",flex:1,filterable:!0},{field:"code",headerName:"Code",flex:1,filterable:!0},{field:"countryName",headerName:"Country",flex:1,filterable:!0},{field:"actions",headerName:"Actions",sortable:!1,filterable:!1,renderCell:e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.A,{onClick:()=>$(e.row),children:(0,k.jsx)(j.A,{})}),(0,k.jsx)(r.A,{onClick:()=>(async e=>{await b.A.delete("".concat(z,"/api/states/").concat(e)),Z()})(e.row._id),children:(0,k.jsx)(S.A,{})})]}),width:120}],G=(0,n.useMemo)(()=>F?e.filter(e=>{var t,a,o;const n=F.toLowerCase(),r=D(e);return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.code)||void 0===a?void 0:a.toLowerCase().includes(n))||(null===(o=r.name)||void 0===o?void 0:o.toLowerCase().includes(n))}):e,[e,F,L]),J=G.map(e=>({State:e.name,Code:e.code,Country:D(e).name||""}));return(0,k.jsxs)(l.A,{p:3,children:[(0,k.jsx)(s.A,{variant:"h6",mb:2,children:"States"}),(0,k.jsxs)(i.A,{direction:"row",spacing:2,mb:2,children:[(0,k.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>$(),children:"Add State"}),(0,k.jsx)(d.A,{label:"Search",value:F,onChange:e=>H(e.target.value),size:"small"}),(0,k.jsx)(c.A,{variant:"outlined",startIcon:(0,k.jsx)(w.A,{}),component:M.CSVLink,data:J,filename:"states.csv",children:"Export CSV"}),(0,k.jsx)(c.A,{variant:"outlined",startIcon:(0,k.jsx)(w.A,{}),onClick:async()=>{const e=(await a.e(762).then(a.bind(a,7762))).default,t=(await a.e(857).then(a.bind(a,4857))).default,o=new e;o.text("States",14,10),t(o,{head:[["State","Country"]],body:G.map(e=>[e.name,D(e).name||""])}),o.save("states.pdf")},children:"Export PDF"})]}),(0,k.jsx)(l.A,{sx:{height:400,width:"100%"},children:(0,k.jsx)(y.z,{rows:G.filter(Boolean).map(e=>(0,o.A)((0,o.A)({},e),{},{id:e._id,countryName:D(e).name||""})),columns:U,pageSize:T,onPageSizeChange:e=>V(e),rowsPerPageOptions:[3,6,9,15],pagination:!0,components:{Toolbar:C.O},disableSelectionOnClick:!0,autoHeight:!0})}),(0,k.jsxs)(u.A,{open:N,onClose:q,children:[(0,k.jsx)(p.A,{children:_?"Edit State":"Add State"}),(0,k.jsxs)(A.A,{children:[E&&(0,k.jsx)(m.A,{severity:"error",sx:{mb:2},children:E}),(0,k.jsx)(d.A,{label:"Name",value:R.name,onChange:e=>W((0,o.A)((0,o.A)({},R),{},{name:e.target.value})),fullWidth:!0,margin:"normal"}),(0,k.jsx)(d.A,{label:"Code",value:R.code,onChange:e=>W((0,o.A)((0,o.A)({},R),{},{code:e.target.value})),fullWidth:!0,margin:"normal"}),(0,k.jsxs)(h.A,{fullWidth:!0,margin:"normal",children:[(0,k.jsx)(v.A,{children:"Country"}),(0,k.jsx)(g.A,{value:R.country,label:"Country",onChange:e=>W((0,o.A)((0,o.A)({},R),{},{country:e.target.value})),children:L.map(e=>(0,k.jsx)(f.A,{value:e._id,children:e.name},e._id))})]})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(c.A,{onClick:q,children:"Cancel"}),(0,k.jsx)(c.A,{onClick:async()=>{try{_?await b.A.put("".concat(z,"/api/states/").concat(_._id),R):await b.A.post("".concat(z,"/api/states"),R),Z(),q()}catch(t){var e;if(t.response&&400===t.response.status)B(t.response.data.message||t.response.data.errors&&(null===(e=t.response.data.errors[0])||void 0===e?void 0:e.msg)||"Request failed with status code 400");else B("An unexpected error occurred.")}},variant:"contained",children:_?"Update":"Add"})]})]})]})}},7254:(e,t,a)=>{a.d(t,{A:()=>_});var o=a(8587),n=a(8168),r=a(5043),l=a(8387),s=a(5049),i=a(7266),c=a(4350),d=a(4535),u=a(4162),p=a(9848),A=a(3336),m=a(4987),h=a(239);function v(e){return(0,h.Ay)("MuiAlert",e)}const g=(0,m.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var f=a(7392),x=a(9662),y=a(579);const C=(0,x.A)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),j=(0,x.A)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),S=(0,x.A)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),w=(0,x.A)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var b=a(6871);const M=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],k=(0,c.h)("MuiAlert"),z=(0,d.Ay)(A.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["".concat(a.variant).concat((0,p.A)(a.color||a.severity))]]}})(e=>{let{theme:t}=e;const a="light"===t.palette.mode?i.e$:i.a,o="light"===t.palette.mode?i.a:i.e$;return(0,n.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[n]=e;return{props:{colorSeverity:n,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(n,"Color")]:a(t.palette[n].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(n,"StandardBg")]:o(t.palette[n].light,.9),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(n,"IconColor")]}:{color:t.palette[n].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[o]=e;return{props:{colorSeverity:o,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:a(t.palette[o].light,.6),border:"1px solid ".concat((t.vars||t).palette[o].light),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.dark}).map(e=>{let[a]=e;return{props:{colorSeverity:a,variant:"filled"},style:(0,n.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(a,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(a,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[a].dark:t.palette[a].main,color:t.palette.getContrastText(t.palette[a].main)})}})]})}),L=(0,d.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),I=(0,d.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),N=(0,d.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),P={success:(0,y.jsx)(C,{fontSize:"inherit"}),warning:(0,y.jsx)(j,{fontSize:"inherit"}),error:(0,y.jsx)(S,{fontSize:"inherit"}),info:(0,y.jsx)(w,{fontSize:"inherit"})},_=r.forwardRef(function(e,t){const a=k({props:e,name:"MuiAlert"}),{action:r,children:i,className:c,closeText:d="Close",color:A,components:m={},componentsProps:h={},icon:g,iconMapping:x=P,onClose:C,role:j="alert",severity:S="success",slotProps:w={},slots:_={},variant:O="standard"}=a,R=(0,o.A)(a,M),W=(0,n.A)({},a,{color:A,severity:S,variant:O,colorSeverity:A||S}),E=(e=>{const{variant:t,color:a,severity:o,classes:n}=e,r={root:["root","color".concat((0,p.A)(a||o)),"".concat(t).concat((0,p.A)(a||o)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,s.A)(r,v,n)})(W),B={slots:(0,n.A)({closeButton:m.CloseButton,closeIcon:m.CloseIcon},_),slotProps:(0,n.A)({},h,w)},[F,H]=(0,u.A)("closeButton",{elementType:f.A,externalForwardedProps:B,ownerState:W}),[T,V]=(0,u.A)("closeIcon",{elementType:b.A,externalForwardedProps:B,ownerState:W});return(0,y.jsxs)(z,(0,n.A)({role:j,elevation:0,ownerState:W,className:(0,l.A)(E.root,c),ref:t},R,{children:[!1!==g?(0,y.jsx)(L,{ownerState:W,className:E.icon,children:g||x[S]||P[S]}):null,(0,y.jsx)(I,{ownerState:W,className:E.message,children:i}),null!=r?(0,y.jsx)(N,{ownerState:W,className:E.action,children:r}):null,null==r&&C?(0,y.jsx)(N,{ownerState:W,className:E.action,children:(0,y.jsx)(F,(0,n.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:C},H,{children:(0,y.jsx)(T,(0,n.A)({fontSize:"small"},V))}))}):null]}))})}}]);
//# sourceMappingURL=845.b850f0d7.chunk.js.map