"use strict";(self.webpackChunkadmin_panel_frontend=self.webpackChunkadmin_panel_frontend||[]).push([[620],{6239:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(9379),o=a(5043),l=a(7392),r=a(6446),i=a(5865),s=a(8911),c=a(3438),d=a(5795),u=a(35),v=a(6600),p=a(5316),m=a(7254),A=a(3193),h=a(9190),g=a(2221),f=a(2143),x=a(9347),y=a(8768),j=a(1019),C=a(3560),S=a(3768),w=a(7968),b=a(9722),N=a(2378),L=a(579);const M="https://langingpage-production-f27f.up.railway.app";const k=function(){const[e,t]=(0,o.useState)([]),[k,z]=(0,o.useState)([]),[_,I]=(0,o.useState)([]),[O,P]=(0,o.useState)([]),[W,E]=(0,o.useState)(!1),[R,T]=(0,o.useState)(null),[F,H]=(0,o.useState)({name:"",slug:"",country:"",state:"",city:""}),[B,V]=(0,o.useState)(""),[G,$]=(0,o.useState)(""),[q,Z]=(0,o.useState)(3),D=async()=>{const e=await b.A.get("".concat(M,"/api/locations"));t(e.data)};(0,o.useEffect)(()=>{D(),(async()=>{const e=await b.A.get("".concat(M,"/api/countries"));z(e.data)})(),(async()=>{const e=await b.A.get("".concat(M,"/api/states"));I(e.data)})(),(async()=>{const e=await b.A.get("".concat(M,"/api/cities"));P(e.data)})()},[]);const U=function(){var e,t,a;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;T(n),H(n?{name:n.name,slug:n.slug,country:(null===(e=n.country)||void 0===e?void 0:e._id)||"",state:(null===(t=n.state)||void 0===t?void 0:t._id)||"",city:(null===(a=n.city)||void 0===a?void 0:a._id)||""}:{name:"",slug:"",country:"",state:"",city:""}),V(""),E(!0)},J=()=>{E(!1),T(null),H({name:"",slug:"",country:"",state:"",city:""}),V("")},K=[{field:"name",headerName:"Name",flex:1,filterable:!0},{field:"slug",headerName:"Slug",flex:1,filterable:!0},{field:"city",headerName:"City",flex:1,valueGetter:e=>{var t,a;return(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(a=t.city)||void 0===a?void 0:a.name)||"Not specified"},filterable:!0},{field:"state",headerName:"State",flex:1,valueGetter:e=>{var t,a;return(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.name)||"Not specified"},filterable:!0},{field:"country",headerName:"Country",flex:1,valueGetter:e=>{var t,a;return(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(a=t.country)||void 0===a?void 0:a.name)||"Not specified"},filterable:!0},{field:"actions",headerName:"Actions",sortable:!1,filterable:!1,renderCell:e=>null!==e&&void 0!==e&&e.row?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(l.A,{onClick:()=>U(e.row),children:(0,L.jsx)(C.A,{})}),(0,L.jsx)(l.A,{onClick:()=>(async e=>{await b.A.delete("".concat(M,"/api/locations/").concat(e)),D()})(e.row._id),children:(0,L.jsx)(S.A,{})})]}):null,width:120}],Q=(0,o.useMemo)(()=>G?e.filter(e=>{var t,a,n,o,l,r,i,s;const c=G.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(a=e.slug)||void 0===a?void 0:a.toLowerCase().includes(c))||(null===(n=e.city)||void 0===n||null===(o=n.name)||void 0===o?void 0:o.toLowerCase().includes(c))||(null===(l=e.state)||void 0===l||null===(r=l.name)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(i=e.country)||void 0===i||null===(s=i.name)||void 0===s?void 0:s.toLowerCase().includes(c))}):e,[e,G]),X=Q.map(e=>{var t,a,n;return{Name:e.name,Slug:e.slug,City:(null===(t=e.city)||void 0===t?void 0:t.name)||"Not specified",State:(null===(a=e.state)||void 0===a?void 0:a.name)||"Not specified",Country:(null===(n=e.country)||void 0===n?void 0:n.name)||"Not specified"}});return(0,L.jsxs)(r.A,{p:3,children:[(0,L.jsx)(i.A,{variant:"h6",mb:2,children:"Locations"}),(0,L.jsxs)(s.A,{direction:"row",spacing:2,mb:2,children:[(0,L.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>U(),children:"Add Location"}),(0,L.jsx)(d.A,{label:"Search",value:G,onChange:e=>$(e.target.value),size:"small"}),(0,L.jsx)(c.A,{variant:"outlined",startIcon:(0,L.jsx)(w.A,{}),component:N.CSVLink,data:X,filename:"locations.csv",children:"Export CSV"}),(0,L.jsx)(c.A,{variant:"outlined",startIcon:(0,L.jsx)(w.A,{}),onClick:async()=>{const e=(await a.e(762).then(a.bind(a,7762))).default,t=(await a.e(857).then(a.bind(a,4857))).default,n=new e;n.text("Locations",14,10),t(n,{head:[["Location","State","Country"]],body:Q.map(e=>{var t,a;return[e.name,(null===(t=e.state)||void 0===t?void 0:t.name)||"",(null===(a=e.country)||void 0===a?void 0:a.name)||""]})}),n.save("locations.pdf")},children:"Export PDF"})]}),(0,L.jsx)(r.A,{sx:{height:400,width:"100%"},children:(0,L.jsx)(y.z,{rows:Q.map(e=>(0,n.A)((0,n.A)({},e),{},{id:e._id})),columns:K,pageSize:q,onPageSizeChange:e=>Z(e),rowsPerPageOptions:[3,6,9,15],pagination:!0,components:{Toolbar:j.O},disableSelectionOnClick:!0,autoHeight:!0})}),(0,L.jsxs)(u.A,{open:W,onClose:J,children:[(0,L.jsx)(v.A,{children:R?"Edit Location":"Add Location"}),(0,L.jsxs)(p.A,{children:[B&&(0,L.jsx)(m.A,{severity:"error",sx:{mb:2},children:B}),(0,L.jsx)(d.A,{label:"Name",value:F.name,onChange:e=>H((0,n.A)((0,n.A)({},F),{},{name:e.target.value})),fullWidth:!0,margin:"normal"}),(0,L.jsx)(d.A,{label:"Slug",value:F.slug,onChange:e=>H((0,n.A)((0,n.A)({},F),{},{slug:e.target.value})),fullWidth:!0,margin:"normal",helperText:"Enter a unique identifier for the location (e.g., 'new-york-office', 'london-branch')"}),(0,L.jsxs)(A.A,{fullWidth:!0,margin:"normal",children:[(0,L.jsx)(h.A,{children:"Country *"}),(0,L.jsxs)(g.A,{value:F.country,label:"Country *",onChange:e=>H((0,n.A)((0,n.A)({},F),{},{country:e.target.value})),children:[(0,L.jsx)(f.A,{value:"",children:(0,L.jsx)("em",{children:"None (Optional)"})}),k.map(e=>(0,L.jsx)(f.A,{value:e._id,children:e.name},e._id))]})]}),(0,L.jsxs)(A.A,{fullWidth:!0,margin:"normal",children:[(0,L.jsx)(h.A,{children:"State *"}),(0,L.jsxs)(g.A,{value:F.state,label:"State *",onChange:e=>H((0,n.A)((0,n.A)({},F),{},{state:e.target.value})),children:[(0,L.jsx)(f.A,{value:"",children:(0,L.jsx)("em",{children:"None (Optional)"})}),_.map(e=>(0,L.jsx)(f.A,{value:e._id,children:e.name},e._id))]})]}),(0,L.jsxs)(A.A,{fullWidth:!0,margin:"normal",children:[(0,L.jsx)(h.A,{children:"City *"}),(0,L.jsxs)(g.A,{value:F.city,label:"City *",onChange:e=>H((0,n.A)((0,n.A)({},F),{},{city:e.target.value})),children:[(0,L.jsx)(f.A,{value:"",children:(0,L.jsx)("em",{children:"None (Optional)"})}),O.map(e=>(0,L.jsx)(f.A,{value:e._id,children:e.name},e._id))]})]}),(0,L.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},children:"* At least one of Country, State, or City must be specified"})]}),(0,L.jsxs)(x.A,{children:[(0,L.jsx)(c.A,{onClick:J,children:"Cancel"}),(0,L.jsx)(c.A,{onClick:async()=>{try{if(t=F.slug,!/^[a-z0-9-]+$/.test(t))return void V("Slug can only contain lowercase letters, numbers, and hyphens. No spaces or other characters allowed.");if(!F.country&&!F.state&&!F.city)return void V("At least one of country, state, or city must be specified");const e=(0,n.A)((0,n.A)({},F),{},{country:F.country||null,state:F.state||null,city:F.city||null});R?await b.A.put("".concat(M,"/api/locations/").concat(R._id),e):await b.A.post("".concat(M,"/api/locations"),e),D(),J()}catch(a){var e;if(a.response&&400===a.response.status)V(a.response.data.message||a.response.data.errors&&(null===(e=a.response.data.errors[0])||void 0===e?void 0:e.msg)||"Request failed with status code 400");else V("An unexpected error occurred.")}var t},variant:"contained",children:R?"Update":"Add"})]})]})]})}},7254:(e,t,a)=>{a.d(t,{A:()=>O});var n=a(8587),o=a(8168),l=a(5043),r=a(8387),i=a(5049),s=a(7266),c=a(4350),d=a(4535),u=a(4162),v=a(9848),p=a(3336),m=a(4987),A=a(239);function h(e){return(0,A.Ay)("MuiAlert",e)}const g=(0,m.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var f=a(7392),x=a(9662),y=a(579);const j=(0,x.A)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),C=(0,x.A)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),S=(0,x.A)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),w=(0,x.A)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var b=a(6871);const N=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],L=(0,c.h)("MuiAlert"),M=(0,d.Ay)(p.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["".concat(a.variant).concat((0,v.A)(a.color||a.severity))]]}})(e=>{let{theme:t}=e;const a="light"===t.palette.mode?s.e$:s.a,n="light"===t.palette.mode?s.a:s.e$;return(0,o.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[o]=e;return{props:{colorSeverity:o,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:a(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:n(t.palette[o].light,.9),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[n]=e;return{props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(n,"Color")]:a(t.palette[n].light,.6),border:"1px solid ".concat((t.vars||t).palette[n].light),["& .".concat(g.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(n,"IconColor")]}:{color:t.palette[n].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.dark}).map(e=>{let[a]=e;return{props:{colorSeverity:a,variant:"filled"},style:(0,o.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(a,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(a,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[a].dark:t.palette[a].main,color:t.palette.getContrastText(t.palette[a].main)})}})]})}),k=(0,d.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),z=(0,d.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),_=(0,d.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),I={success:(0,y.jsx)(j,{fontSize:"inherit"}),warning:(0,y.jsx)(C,{fontSize:"inherit"}),error:(0,y.jsx)(S,{fontSize:"inherit"}),info:(0,y.jsx)(w,{fontSize:"inherit"})},O=l.forwardRef(function(e,t){const a=L({props:e,name:"MuiAlert"}),{action:l,children:s,className:c,closeText:d="Close",color:p,components:m={},componentsProps:A={},icon:g,iconMapping:x=I,onClose:j,role:C="alert",severity:S="success",slotProps:w={},slots:O={},variant:P="standard"}=a,W=(0,n.A)(a,N),E=(0,o.A)({},a,{color:p,severity:S,variant:P,colorSeverity:p||S}),R=(e=>{const{variant:t,color:a,severity:n,classes:o}=e,l={root:["root","color".concat((0,v.A)(a||n)),"".concat(t).concat((0,v.A)(a||n)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,i.A)(l,h,o)})(E),T={slots:(0,o.A)({closeButton:m.CloseButton,closeIcon:m.CloseIcon},O),slotProps:(0,o.A)({},A,w)},[F,H]=(0,u.A)("closeButton",{elementType:f.A,externalForwardedProps:T,ownerState:E}),[B,V]=(0,u.A)("closeIcon",{elementType:b.A,externalForwardedProps:T,ownerState:E});return(0,y.jsxs)(M,(0,o.A)({role:C,elevation:0,ownerState:E,className:(0,r.A)(R.root,c),ref:t},W,{children:[!1!==g?(0,y.jsx)(k,{ownerState:E,className:R.icon,children:g||x[S]||I[S]}):null,(0,y.jsx)(z,{ownerState:E,className:R.message,children:s}),null!=l?(0,y.jsx)(_,{ownerState:E,className:R.action,children:l}):null,null==l&&j?(0,y.jsx)(_,{ownerState:E,className:R.action,children:(0,y.jsx)(F,(0,o.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:j},H,{children:(0,y.jsx)(B,(0,o.A)({fontSize:"small"},V))}))}):null]}))})}}]);
//# sourceMappingURL=620.7f89c273.chunk.js.map