"use strict";(self.webpackChunkadmin_panel_frontend=self.webpackChunkadmin_panel_frontend||[]).push([[863],{3863:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var n=a(9379),o=a(5043),r=a(7392),l=a(6446),i=a(5865),s=a(8911),c=a(3438),d=a(5795),u=a(35),p=a(6600),v=a(5316),A=a(7254),m=a(3193),h=a(9190),x=a(2221),g=a(2143),f=a(9347),y=a(8768),C=a(1019),j=a(3560),S=a(3768),w=a(7968),b=a(9722),M=a(2378),k=a(579);const z="https://langingpage-production-f27f.up.railway.app";const L=function(){const[e,t]=(0,o.useState)([]),[L,I]=(0,o.useState)([]),[_,N]=(0,o.useState)([]),[P,E]=(0,o.useState)(!1),[O,R]=(0,o.useState)(null),[W,F]=(0,o.useState)({name:"",country:"",state:""}),[H,T]=(0,o.useState)(""),[B,V]=(0,o.useState)(""),[Z,$]=(0,o.useState)(3),q=async()=>{const e=(await b.A.get("".concat(z,"/api/cities"))).data.map(e=>(0,n.A)((0,n.A)({},e),{},{state:e.state||null,country:e.country||null}));t(e)};(0,o.useEffect)(()=>{q(),(async()=>{const e=await b.A.get("".concat(z,"/api/countries"));I(e.data)})()},[]),(0,o.useEffect)(()=>{W.country?(async e=>{if(!e)return N([]);const t=await b.A.get("".concat(z,"/api/states/country/").concat(e));N(t.data)})(W.country):N([])},[W.country]);const D=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;R(a),F(a?{name:a.name,country:(null===(e=a.country)||void 0===e?void 0:e._id)||"",state:(null===(t=a.state)||void 0===t?void 0:t._id)||""}:{name:"",country:"",state:""}),T(""),E(!0)},U=()=>{E(!1),R(null),F({name:"",country:"",state:""}),T("")},G=[{field:"name",headerName:"City",flex:1,filterable:!0},{field:"state",headerName:"State",flex:1,renderCell:e=>{var t;return(null===(t=e.row.state)||void 0===t?void 0:t.name)||""},filterable:!0},{field:"country",headerName:"Country",flex:1,renderCell:e=>{var t;return(null===(t=e.row.country)||void 0===t?void 0:t.name)||""},filterable:!0},{field:"actions",headerName:"Actions",sortable:!1,filterable:!1,renderCell:e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.A,{onClick:()=>D(e.row),children:(0,k.jsx)(j.A,{})}),(0,k.jsx)(r.A,{onClick:()=>(async e=>{await b.A.delete("http://localhost:5000/api/cities/".concat(e)),q()})(e.row._id),children:(0,k.jsx)(S.A,{})})]}),width:120}],J=(0,o.useMemo)(()=>B?e.filter(e=>{var t,a,n,o,r;const l=B.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(a=e.state)||void 0===a||null===(n=a.name)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(o=e.country)||void 0===o||null===(r=o.name)||void 0===r?void 0:r.toLowerCase().includes(l))}):e,[e,B]),K=J.map(e=>{var t,a;return{City:e.name,State:(null===(t=e.state)||void 0===t?void 0:t.name)||"",Country:(null===(a=e.country)||void 0===a?void 0:a.name)||""}});return(0,k.jsxs)(l.A,{p:3,children:[(0,k.jsx)(i.A,{variant:"h6",mb:2,children:"Cities"}),(0,k.jsxs)(s.A,{direction:"row",spacing:2,mb:2,children:[(0,k.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>D(),children:"Add City"}),(0,k.jsx)(d.A,{label:"Search",value:B,onChange:e=>V(e.target.value),size:"small"}),(0,k.jsx)(c.A,{variant:"outlined",startIcon:(0,k.jsx)(w.A,{}),component:M.CSVLink,data:K,filename:"cities.csv",children:"Export CSV"}),(0,k.jsx)(c.A,{variant:"outlined",startIcon:(0,k.jsx)(w.A,{}),onClick:async()=>{const e=(await a.e(762).then(a.bind(a,7762))).default,t=(await a.e(857).then(a.bind(a,4857))).default,n=new e;n.text("Cities",14,10),t(n,{head:[["City","State","Country"]],body:J.map(e=>{var t,a;return[e.name,(null===(t=e.state)||void 0===t?void 0:t.name)||"",(null===(a=e.country)||void 0===a?void 0:a.name)||""]})}),n.save("cities.pdf")},children:"Export PDF"})]}),(0,k.jsx)(l.A,{sx:{height:400,width:"100%"},children:(0,k.jsx)(y.z,{rows:J.map(e=>(0,n.A)((0,n.A)({},e),{},{id:e._id})),columns:G,pageSize:Z,onPageSizeChange:e=>$(e),rowsPerPageOptions:[3,6,9,15],pagination:!0,components:{Toolbar:C.O},disableSelectionOnClick:!0,autoHeight:!0})}),(0,k.jsxs)(u.A,{open:P,onClose:U,children:[(0,k.jsx)(p.A,{children:O?"Edit City":"Add City"}),(0,k.jsxs)(v.A,{children:[H&&(0,k.jsx)(A.A,{severity:"error",sx:{mb:2},children:H}),(0,k.jsx)(d.A,{label:"Name",value:W.name,onChange:e=>F((0,n.A)((0,n.A)({},W),{},{name:e.target.value})),fullWidth:!0,margin:"normal"}),(0,k.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,k.jsx)(h.A,{children:"Country"}),(0,k.jsx)(x.A,{value:W.country,label:"Country",onChange:e=>F((0,n.A)((0,n.A)({},W),{},{country:e.target.value,state:""})),children:L.map(e=>(0,k.jsx)(g.A,{value:e._id,children:e.name},e._id))})]}),(0,k.jsxs)(m.A,{fullWidth:!0,margin:"normal",children:[(0,k.jsx)(h.A,{children:"State"}),(0,k.jsx)(x.A,{value:W.state,label:"State",onChange:e=>F((0,n.A)((0,n.A)({},W),{},{state:e.target.value})),disabled:!W.country,children:_.map(e=>(0,k.jsx)(g.A,{value:e._id,children:e.name},e._id))})]})]}),(0,k.jsxs)(f.A,{children:[(0,k.jsx)(c.A,{onClick:U,children:"Cancel"}),(0,k.jsx)(c.A,{onClick:async()=>{try{O?await b.A.put("".concat(z,"/api/cities/").concat(O._id),W):await b.A.post("".concat(z,"/api/cities"),W),q(),U()}catch(t){var e;if(t.response&&400===t.response.status)T(t.response.data.message||t.response.data.errors&&(null===(e=t.response.data.errors[0])||void 0===e?void 0:e.msg)||"Request failed with status code 400");else T("An unexpected error occurred.")}},variant:"contained",children:O?"Update":"Add"})]})]})]})}},7254:(e,t,a)=>{a.d(t,{A:()=>P});var n=a(8587),o=a(8168),r=a(5043),l=a(8387),i=a(5049),s=a(7266),c=a(4350),d=a(4535),u=a(4162),p=a(9848),v=a(3336),A=a(4987),m=a(239);function h(e){return(0,m.Ay)("MuiAlert",e)}const x=(0,A.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var g=a(7392),f=a(9662),y=a(579);const C=(0,f.A)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),j=(0,f.A)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),S=(0,f.A)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),w=(0,f.A)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var b=a(6871);const M=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],k=(0,c.h)("MuiAlert"),z=(0,d.Ay)(v.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t["".concat(a.variant).concat((0,p.A)(a.color||a.severity))]]}})(e=>{let{theme:t}=e;const a="light"===t.palette.mode?s.e$:s.a,n="light"===t.palette.mode?s.a:s.e$;return(0,o.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[o]=e;return{props:{colorSeverity:o,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:a(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:n(t.palette[o].light,.9),["& .".concat(x.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[n]=e;return{props:{colorSeverity:n,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(n,"Color")]:a(t.palette[n].light,.6),border:"1px solid ".concat((t.vars||t).palette[n].light),["& .".concat(x.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(n,"IconColor")]}:{color:t.palette[n].main}}}}),...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.dark}).map(e=>{let[a]=e;return{props:{colorSeverity:a,variant:"filled"},style:(0,o.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(a,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(a,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[a].dark:t.palette[a].main,color:t.palette.getContrastText(t.palette[a].main)})}})]})}),L=(0,d.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),I=(0,d.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),_=(0,d.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),N={success:(0,y.jsx)(C,{fontSize:"inherit"}),warning:(0,y.jsx)(j,{fontSize:"inherit"}),error:(0,y.jsx)(S,{fontSize:"inherit"}),info:(0,y.jsx)(w,{fontSize:"inherit"})},P=r.forwardRef(function(e,t){const a=k({props:e,name:"MuiAlert"}),{action:r,children:s,className:c,closeText:d="Close",color:v,components:A={},componentsProps:m={},icon:x,iconMapping:f=N,onClose:C,role:j="alert",severity:S="success",slotProps:w={},slots:P={},variant:E="standard"}=a,O=(0,n.A)(a,M),R=(0,o.A)({},a,{color:v,severity:S,variant:E,colorSeverity:v||S}),W=(e=>{const{variant:t,color:a,severity:n,classes:o}=e,r={root:["root","color".concat((0,p.A)(a||n)),"".concat(t).concat((0,p.A)(a||n)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,i.A)(r,h,o)})(R),F={slots:(0,o.A)({closeButton:A.CloseButton,closeIcon:A.CloseIcon},P),slotProps:(0,o.A)({},m,w)},[H,T]=(0,u.A)("closeButton",{elementType:g.A,externalForwardedProps:F,ownerState:R}),[B,V]=(0,u.A)("closeIcon",{elementType:b.A,externalForwardedProps:F,ownerState:R});return(0,y.jsxs)(z,(0,o.A)({role:j,elevation:0,ownerState:R,className:(0,l.A)(W.root,c),ref:t},O,{children:[!1!==x?(0,y.jsx)(L,{ownerState:R,className:W.icon,children:x||f[S]||N[S]}):null,(0,y.jsx)(I,{ownerState:R,className:W.message,children:s}),null!=r?(0,y.jsx)(_,{ownerState:R,className:W.action,children:r}):null,null==r&&C?(0,y.jsx)(_,{ownerState:R,className:W.action,children:(0,y.jsx)(H,(0,o.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:C},T,{children:(0,y.jsx)(B,(0,o.A)({fontSize:"small"},V))}))}):null]}))})}}]);
//# sourceMappingURL=863.6d42b173.chunk.js.map